#!/bin/bash
#Generate data.txt
#May need to set execute permission: "chmod +x genDATA.sh"
matrix_sizes=(31 32 33 63 64 65 95 96 97 127 128 129 159 160 161 191 192 193 223 224 225 255 256 257 287 288 289 319 320 321 351 352 353 383 384 385 415 416 417 447 448 449 479 480 481 511 512 513 543 544 545 575 576 577 607 608 609 639 640 641 671 672 673 703 704 705 735 736 737 767 768 769 799 800 801 831 832 833 863 864 865 895 896 897 927 928 929 959 960 961 991 992 993 1023 1024 1025 1055 1056 1057 1087 1088 1089 1119 1120 1121 1151 1152 1153 1183 1184 1185 1215 1216 1217 1247 1248 1249 1279 1280 1281 1311 1312 1313 1343 1344 1345 1375 1376 1377 1407 1408 1409 1439 1440 1441 1471 1472 1473 1503 1504 1505 1535 1536 1537 1567 1568 1569 1599 1600 1601 1631 1632 1633 1663 1664 1665 1695 1696 1697 1727 1728 1729 1759 1760 1761 1791 1792 1793 1823 1824 1825 1855 1856 1857 1887 1888 1889 1919 1920 1921 1951 1952 1953 1983 1984 1985 2015 2016 2017 2047 2048 2049)

> data.txt

for size in "${matrix_sizes[@]}"
do
	SUM=0
	for i in {1..20}
	do
		OUTPUT=$(./benchmark-blislab -n $size -g)
		GFLOPS=$(echo $OUTPUT | awk '{print $2}')
		SUM=$(awk '{print $1+$2}' <<<"${SUM} ${GFLOPS}")
	done
	AVG=$(awk '{print $1/20}' <<<"${SUM}")
	printf '%d\t%s\n' $size $AVG >> data.txt
done

